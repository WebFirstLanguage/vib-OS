# UnixOS GRUB Configuration
# For ARM64 UEFI boot

set default=0
set timeout=5
set gfxmode=auto

# Load video modules
insmod all_video
insmod gfxterm

# Set terminal output
terminal_output gfxterm

# UnixOS boot menu entry
menuentry "UnixOS" {
    echo "Loading UnixOS kernel..."

    # Load kernel with multiboot2
    # For ARM64, we use linux command with EFI stub
    linux /EFI/BOOT/kernel.elf root=/dev/nvme0n1p2 console=ttyS0,115200 console=tty0

    # Load initial ramdisk if present
    # initrd /EFI/BOOT/initrd.img

    echo "Booting..."
}

menuentry "UnixOS (Live Boot)" {
    echo "Loading UnixOS in live boot mode..."

    # Live boot mode with RamFS root
    linux /EFI/BOOT/kernel.elf live_boot=1 console=ttyS0,115200 console=tty0

    echo "Booting into live mode..."
}

menuentry "UnixOS (Safe Mode)" {
    echo "Loading UnixOS in safe mode..."
    
    linux /EFI/BOOT/kernel.elf root=/dev/nvme0n1p2 console=ttyS0,115200 single nosmp
    
    echo "Booting..."
}

menuentry "UnixOS (Debug Mode)" {
    echo "Loading UnixOS with debugging..."
    
    linux /EFI/BOOT/kernel.elf root=/dev/nvme0n1p2 console=ttyS0,115200 debug earlyprintk=serial
    
    echo "Booting..."
}

menuentry "Reboot" {
    reboot
}

menuentry "Shutdown" {
    halt
}
